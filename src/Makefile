CXX = g++
CXXFLAGS = -std=c++11 -I../third_party/asio-1.28.0/include

SERVER_SOURCE = server.cpp
CLIENT_SOURCE = client.cpp
DATABASE_SOURCE = database.cpp

DATABASE_OBJECT = $(DATABASE_SOURCE:.cpp=.o)

SERVER_EXECUTABLE = server
CLIENT_EXECUTABLE = smalltable

EXECUTABLES = $(SERVER_EXECUTABLE) $(CLIENT_EXECUTABLE)

all: $(SERVER_EXECUTABLE) $(CLIENT_EXECUTABLE)

$(DATABASE_OBJECT): $(DATABASE_SOURCE)
	$(CXX) $(CXXFLAGS) -c $< -o $@

$(SERVER_EXECUTABLE): $(SERVER_SOURCE) $(DATABASE_OBJECT)
	$(CXX) $(CXXFLAGS) $^ -o $@

$(CLIENT_EXECUTABLE): $(CLIENT_SOURCE)
	$(CXX) $(CXXFLAGS) $^ -o $@

clean:
	rm -f $(EXECUTABLES) $(DATABASE_OBJECT)
